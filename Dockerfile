FROM pytorch/pytorch
RUN apt-get update
RUN apt-get install -y gcc g++ libglib2.0-0 libsm6 libxext6 libxrender-dev libgl1-mesa-glx vim git curl wget
#ADD https://urldefense.com/v3/__https://gitlab.nrp-nautilus.io/deepaksridhar94/attentionvit/-/raw/main/attentionvitenv.yml__;!!Mih3wA!Bwh62hyfnUf8OlhRI3ZjwlYuImLhpC7JAzG3TnRQi7HfKNVkwtOA-i5S5VzHS2DTXzr8nNWSby6APs8ktg$  /tmp/environment.yml
#RUN conda install -c anaconda ruamel_yaml
#RUN conda install -c conda-forge ruamel_yaml
#ADD https://urldefense.com/v3/__https://gitlab.nrp-nautilus.io/deepaksridhar94/diff/-/blob/main/environment.yml__;!!Mih3wA!Bwh62hyfnUf8OlhRI3ZjwlYuImLhpC7JAzG3TnRQi7HfKNVkwtOA-i5S5VzHS2DTXzr8nNWSby4EAZL8tA$  /tmp/ldmenvironment.yml
ADD https://urldefense.com/v3/__https://gitlab.nrp-nautilus.io/a-lakh/AE/-/blob/main/requirements.txt__;!!Mih3wA!Bwh62hyfnUf8OlhRI3ZjwlYuImLhpC7JAzG3TnRQi7HfKNVkwtOA-i5S5VzHS2DTXzr8nNWSby4WKmdtBw$  /tmp/requirements.txt
RUN conda create -n ldm python=3.8
RUN conda init bash
RUN echo "source activate ldm" >> ~/.bashrc
#RUN pip install -r /tmp/requirements.txt
RUN pip install tokenizers
#RUN pip install albumentations==0.4.3 altair==4.2.2 antlr4-python3-runtime==4.8 async-timeout==4.0.2 attrs==22.2.0 blinker==1.6 cachetools==5.3.0 certifi charset-normalizer==3.1.0 click==8.1.3 cmake==3.26.1 contourpy==1.0.5 cycler==0.11.0 decorator==5.1.1 easydict==1.10 einops==0.3.0 entrypoints==0.4 filelock==3.10.7 flit-core fonttools==4.37.4 frozenlist==1.3.3 fsspec==2023.3.0 ftfy==6.1.1 future==0.18.3 gitdb==4.0.10 GitPython==3.1.31 google-auth==2.17.2 google-auth-oauthlib==1.0.0 graphviz==0.8.4 grpcio==1.53.0 huggingface-hub==0.0.8 idna==3.4 imageio==2.9.0 imageio-ffmpeg==0.4.2 imgaug==0.2.6 importlib-metadata==6.1.0 importlib-resources==5.12.0 Jinja2==3.1.2 joblib==1.2.0 jsonschema==4.17.3 kiwisolver==1.4.4 kornia==0.5.0 lazy-loader==0.1 lit==16.0.0 Markdown==3.4.3 markdown-it-py==2.2.0 MarkupSafe==2.1.2 matplotlib==3.7.1 mdurl==0.1.2 mkl-fft==1.3.1 mkl-random  mkl-service==2.4.0 mpmath==1.3.0 multidict==6.0.4 mxnet==1.9.1 networkx==3.0 numpy==1.24.2 nvidia-cublas-cu11==11.10.3.66 nvidia-cuda-cupti-cu11==11.7.101 nvidia-cuda-nvrtc-cu11==11.7.99 nvidia-cuda-runtime-cu11==11.7.99 nvidia-cudnn-cu11==8.5.0.96 nvidia-cufft-cu11==10.9.0.58 nvidia-curand-cu11==10.2.10.91 nvidia-cusolver-cu11==11.4.0.1 nvidia-cusparse-cu11==11.7.4.91 nvidia-nccl-cu11==2.14.3 nvidia-nvtx-cu11==11.7.91 oauthlib==3.2.2 omegaconf==2.1.1 open-clip-torch==2.16.0 opencv-python==4.6.0.66 packaging==21.3 pandas==1.5.3 pathspec==0.11.1 Pillow==9.4.0 pkgutil-resolve-name==1.3.10 prettytable==3.6.0 protobuf==3.20.3 pudb==2019.2 pyarrow==11.0.0 pyasn1==0.4.8 pyasn1-modules==0.2.8 pycocotools==2.0.5 pydeck==0.8.0 pyDeprecate==0.3.1 Pygments==2.14.0 Pympler==1.0.1 pyparsing==3.0.9 pyrsistent==0.19.3 python-dateutil==2.8.2 pytorch-lightning==1.4.2 PyTurboJPEG==1.7.0 pytz==2023.3 pytz-deprecation-shim==0.1.0.post0 PyWavelets==1.4.1 PyYAML==6.0 regex==2023.3.23 requests==2.28.2 requests-oauthlib==1.3.1 rich==13.3.3 rsa==4.9 sacremoses==0.0.53 scikit-image==0.20.0 scikit-learn==1.2.2 scipy==1.9.1 semver==3.0.0 sentencepiece==0.1.97 shapely==2.0.1 six smmap==5.0.0 streamlit==1.20.0 sympy==1.11.1 tensorboard==2.12.1 tensorboard-data-server==0.7.0 tensorboard-plugin-wit==1.8.1 tensorboardX==2.6 termcolor==2.2.0 terminaltables==3.1.10 test-tube==0.7.5 threadpoolctl==3.1.0 tifffile==2023.2.28 timm==0.6.11 toolz==0.12.0 torch==2.0.0 torch-fidelity==0.3.0 torchmetrics torchvision tornado==6.2 tqdm==4.65.0 transformers==4.6.0 triton==2.0.0 typing-extensions tzdata==2023.3 tzlocal==4.3 urllib3==1.26.15 urwid==2.1.2 validators==0.20.0 watchdog==3.0.0 wcwidth==0.2.6 Werkzeug==2.2.3 yamllint==1.30.0 yarl==1.8.2 zipp==3.15.0
RUN pip install albumentations cmake easydict einops ftfy matplotlib numpy nvidia-cublas-cu11==11.10.3.66 nvidia-cuda-cupti-cu11==11.7.101 nvidia-cuda-nvrtc-cu11==11.7.99 nvidia-cuda-runtime-cu11==11.7.99 nvidia-cudnn-cu11==8.5.0.96 nvidia-cufft-cu11==10.9.0.58 nvidia-curand-cu11==10.2.10.91 nvidia-cusolver-cu11==11.4.0.1 nvidia-cusparse-cu11==11.7.4.91 nvidia-nccl-cu11==2.14.3 nvidia-nvtx-cu11==11.7.91 oauthlib omegaconf open-clip-torch opencv-python pandas Pillow pudb pytorch-lightning scikit-image scikit-learn scipy tensorboard tensorboardX timm torch torch-fidelity torchmetrics torchvision tqdm transformers 
#RUN pip install mmcv-full==1.7.1
#RUN conda env create -f /tmp/mmlabenvironment.yml
ENV PATH /opt/conda/envs/ldm/bin:$PATH
RUN exec bash
